<!DOCTYPE html>
<html>
<head>
    <title>Titanic EDA Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2d6a4f;
            text-align: center;
        }
        .upload-section {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px dashed #4caf50;
        }
        .file-inputs {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .file-group {
            flex: 1;
        }
        input[type="file"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #388e3c;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .stat-box {
            background: #2d6a4f;
            color: white;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #2d6a4f;
            color: white;
        }
        tr:hover {
            background: #f5f5f5;
        }
        .chart-container {
            height: 300px;
            margin: 20px 0;
            position: relative;
        }
        .insights {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #4caf50;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üö¢ Titanic EDA Dashboard</h1>
        
        <!-- 1. Data Upload -->
        <div class="upload-section">
            <h2>üìÅ 1. Upload CSV Files</h2>
            <p>Download from: <a href="https://www.kaggle.com/competitions/titanic/data" target="_blank">Kaggle Titanic</a></p>
            <div class="file-inputs">
                <div class="file-group">
                    <label>train.csv (with Survived):</label>
                    <input type="file" id="trainFile" accept=".csv">
                </div>
                <div class="file-group">
                    <label>test.csv (without Survived):</label>
                    <input type="file" id="testFile" accept=".csv">
                </div>
            </div>
            <div>
                <button onclick="loadData()">üìä Load & Merge Data</button>
                <button onclick="resetAll()">üîÑ Reset</button>
                <button onclick="runEDA()">üîç Run Full Analysis</button>
            </div>
            <div id="status" class="status"></div>
        </div>
        
        <!-- 2. Dataset Overview -->
        <div class="card">
            <h2>üìã 2. Dataset Overview</h2>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Total Passengers</div>
                    <div class="stat-value" id="totalPassengers">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Training Set</div>
                    <div class="stat-value" id="trainCount">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Test Set</div>
                    <div class="stat-value" id="testCount">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Features</div>
                    <div class="stat-value" id="featureCount">7</div>
                </div>
            </div>
            
            <h3>Data Preview (first 5 rows):</h3>
            <div style="max-height: 250px; overflow-y: auto;">
                <table id="previewTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Class</th>
                            <th>Sex</th>
                            <th>Age</th>
                            <th>Survived</th>
                        </tr>
                    </thead>
                    <tbody id="previewBody">
                        <tr><td colspan="6" style="text-align: center; padding: 20px;">No data loaded</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="grid">
            <!-- 3. Missing Values -->
            <div class="card">
                <h2>‚ö†Ô∏è 3. Missing Values</h2>
                <div id="missingValues">
                    <p>Load data to see missing values</p>
                </div>
            </div>
            
            <!-- 4. Statistics -->
            <div class="card">
                <h2>üìà 4. Statistics</h2>
                <div id="statistics">
                    <p>Run analysis to see statistics</p>
                </div>
            </div>
        </div>
        
        <!-- 5. Visualizations -->
        <div class="card">
            <h2>üìä 5. Visualizations</h2>
            <div>
                <button onclick="createChart('gender')">üë• Gender</button>
                <button onclick="createChart('class')">üé´ Class</button>
                <button onclick="createChart('age')">üìä Age</button>
                <button onclick="createChart('fare')">üí∞ Fare</button>
                <button onclick="createChart('embarked')">üìç Port</button>
                <button onclick="createChart('family')">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</button>
            </div>
            <div class="chart-container">
                <canvas id="mainChart"></canvas>
            </div>
            <div class="insights" id="insights">
                <h4>üìå Key Insights</h4>
                <div id="insightText">Select a visualization to see insights</div>
            </div>
        </div>
        
        <!-- Multiple Charts Grid -->
        <div class="grid">
            <div class="card">
                <h3>üë• Survival by Gender</h3>
                <div class="chart-container">
                    <canvas id="chart1"></canvas>
                </div>
                <div class="insights">
                    <strong>Insights:</strong><br>
                    ‚Ä¢ Women: 74% survival<br>
                    ‚Ä¢ Men: 19% survival<br>
                    ‚Ä¢ Strongest predictor
                </div>
            </div>
            <div class="card">
                <h3>üé´ Survival by Class</h3>
                <div class="chart-container">
                    <canvas id="chart2"></canvas>
                </div>
                <div class="insights">
                    <strong>Insights:</strong><br>
                    ‚Ä¢ 1st class: 63%<br>
                    ‚Ä¢ 2nd class: 47%<br>
                    ‚Ä¢ 3rd class: 24%
                </div>
            </div>
            <div class="card">
                <h3>üìä Age Distribution</h3>
                <div class="chart-container">
                    <canvas id="chart3"></canvas>
                </div>
                <div class="insights">
                    <strong>Insights:</strong><br>
                    ‚Ä¢ Most: 20-40 years<br>
                    ‚Ä¢ Children: 59% survival<br>
                    ‚Ä¢ 20% missing data
                </div>
            </div>
            <div class="card">
                <h3>üí∞ Fare Distribution</h3>
                <div class="chart-container">
                    <canvas id="chart4"></canvas>
                </div>
                <div class="insights">
                    <strong>Insights:</strong><br>
                    ‚Ä¢ Most under ¬£50<br>
                    ‚Ä¢ High correlation with class<br>
                    ‚Ä¢ Outliers over ¬£200
                </div>
            </div>
        </div>
        
        <!-- 6. Export -->
        <div class="card">
            <h2>üíæ 6. Export Results</h2>
            <div>
                <button onclick="exportCSV()">üì• Download CSV</button>
                <button onclick="exportJSON()">üìÑ Download JSON</button>
                <button onclick="exportReport()">üìã Generate Report</button>
            </div>
            <div id="exportStatus" class="status"></div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let mergedData = [];
        let trainData = [];
        let testData = [];
        let currentChart = null;
        
        // –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞
        function showStatus(msg, type) {
            const status = document.getElementById('status');
            status.textContent = msg;
            status.className = 'status ' + type;
            console.log(type + ': ' + msg);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        async function loadData() {
            console.log('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞!');
            
            const trainFile = document.getElementById('trainFile').files[0];
            const testFile = document.getElementById('testFile').files[0];
            
            if (!trainFile || !testFile) {
                showStatus('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –æ–±–∞ —Ñ–∞–π–ª–∞: train.csv –∏ test.csv', 'error');
                return;
            }
            
            showStatus('‚è≥ –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª—ã...', 'success');
            
            try {
                // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª—ã
                const trainText = await readFile(trainFile);
                const testText = await readFile(testFile);
                
                // –ü–∞—Ä—Å–∏–º CSV
                const trainResults = Papa.parse(trainText, { header: true, dynamicTyping: true });
                const testResults = Papa.parse(testText, { header: true, dynamicTyping: true });
                
                console.log('Train data:', trainResults.data.length, 'rows');
                console.log('Test data:', testResults.data.length, 'rows');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫
                trainData = trainResults.data.map(row => ({...row, source: 'train'}));
                testData = testResults.data.map(row => ({...row, source: 'test'}));
                mergedData = [...trainData, ...testData];
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateUI();
                showStatus(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ! –í—Å–µ–≥–æ: ${mergedData.length} –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤`, 'success');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤', 'error');
            }
        }
        
        // –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
        function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = (e) => reject(e);
                reader.readAsText(file);
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            document.getElementById('totalPassengers').textContent = mergedData.length;
            document.getElementById('trainCount').textContent = trainData.length;
            document.getElementById('testCount').textContent = testData.length;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é –¥–∞–Ω–Ω—ã—Ö
            showDataPreview();
            
            // –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
            showMissingValues();
            
            // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏
            createAllCharts();
        }
        
        // –ü–æ–∫–∞–∑ –ø—Ä–µ–≤—å—é –¥–∞–Ω–Ω—ã—Ö
        function showDataPreview() {
            const tbody = document.getElementById('previewBody');
            tbody.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫
            const preview = mergedData.slice(0, 5);
            
            preview.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.PassengerId || ''}</td>
                    <td>${(row.Name || '').substring(0, 20)}...</td>
                    <td>${row.Pclass || ''}</td>
                    <td>${row.Sex || ''}</td>
                    <td>${row.Age ? row.Age.toFixed(1) : 'N/A'}</td>
                    <td>${row.Survived !== undefined ? row.Survived : 'N/A'}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // –ü–æ–∫–∞–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        function showMissingValues() {
            const container = document.getElementById('missingValues');
            const features = ['Age', 'Cabin', 'Embarked'];
            
            let html = '';
            features.forEach(feature => {
                const missing = mergedData.filter(row => 
                    !row[feature] && row[feature] !== 0
                ).length;
                const percent = ((missing / mergedData.length) * 100).toFixed(1);
                
                html += `
                    <div style="margin: 10px 0;">
                        <strong>${feature}:</strong> ${missing} missing (${percent}%)
                        <div style="height: 10px; background: #eee; border-radius: 5px; margin-top: 5px;">
                            <div style="height: 100%; width: ${percent}%; background: #4caf50; border-radius: 5px;"></div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // –ó–∞–ø—É—Å–∫ EDA –∞–Ω–∞–ª–∏–∑–∞
        function runEDA() {
            if (mergedData.length === 0) {
                showStatus('‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ', 'error');
                return;
            }
            
            showStatus('üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–∞–Ω–Ω—ã–µ...', 'success');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            showStatistics();
            
            // –°–æ–∑–¥–∞–µ–º –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏
            createAllCharts();
            
            showStatus('‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!', 'success');
        }
        
        // –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function showStatistics() {
            if (trainData.length === 0) return;
            
            const survived = trainData.filter(r => r.Survived === 1).length;
            const survivalRate = ((survived / trainData.length) * 100).toFixed(1);
            
            const ages = trainData.filter(r => r.Age).map(r => r.Age);
            const avgAge = ages.length > 0 ? (ages.reduce((a,b) => a + b) / ages.length).toFixed(1) : 'N/A';
            
            const container = document.getElementById('statistics');
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #e8f5e9; padding: 15px; border-radius: 6px;">
                        <div style="font-size: 24px; font-weight: bold; color: #2d6a4f;">${survivalRate}%</div>
                        <div>–û–±—â–∞—è –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç—å</div>
                    </div>
                    <div style="background: #e3f2fd; padding: 15px; border-radius: 6px;">
                        <div style="font-size: 24px; font-weight: bold; color: #1976d2;">${avgAge}</div>
                        <div>–°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç</div>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–ª–∞—Å—Å–∞–º:</strong><br>
                    ‚Ä¢ 1-–π –∫–ª–∞—Å—Å: ${trainData.filter(r => r.Pclass === 1).length} –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤<br>
                    ‚Ä¢ 2-–π –∫–ª–∞—Å—Å: ${trainData.filter(r => r.Pclass === 2).length} –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤<br>
                    ‚Ä¢ 3-–π –∫–ª–∞—Å—Å: ${trainData.filter(r => r.Pclass === 3).length} –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
                </div>
            `;
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
        function createAllCharts() {
            createGenderChart();
            createClassChart();
            createAgeChart();
            createFareChart();
        }
        
        // –ì—Ä–∞—Ñ–∏–∫ –ø–æ –ø–æ–ª—É
        function createGenderChart() {
            const ctx = document.getElementById('chart1').getContext('2d');
            
            const male = trainData.filter(d => d.Sex === 'male');
            const female = trainData.filter(d => d.Sex === 'female');
            
            const data = {
                labels: ['Male', 'Female'],
                datasets: [{
                    label: 'Survived',
                    data: [
                        male.filter(d => d.Survived === 1).length,
                        female.filter(d => d.Survived === 1).length
                    ],
                    backgroundColor: '#4CAF50'
                }, {
                    label: 'Did not survive',
                    data: [
                        male.filter(d => d.Survived === 0).length,
                        female.filter(d => d.Survived === 0).length
                    ],
                    backgroundColor: '#F44336'
                }]
            };
            
            new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        title: { display: true, text: 'Survival by Gender' }
                    }
                }
            });
        }
        
        // –ì—Ä–∞—Ñ–∏–∫ –ø–æ –∫–ª–∞—Å—Å—É
        function createClassChart() {
            const ctx = document.getElementById('chart2').getContext('2d');
            
            const classes = [1, 2, 3];
            const survivalRates = classes.map(cls => {
                const passengers = trainData.filter(d => d.Pclass === cls);
                const survived = passengers.filter(d => d.Survived === 1).length;
                return (survived / passengers.length * 100).toFixed(1);
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['1st Class', '2nd Class', '3rd Class'],
                    datasets: [{
                        label: 'Survival Rate (%)',
                        data: survivalRates,
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    },
                    plugins: {
                        title: { display: true, text: 'Survival Rate by Class' }
                    }
                }
            });
        }
        
        // –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑—Ä–∞—Å—Ç–∞
        function createAgeChart() {
            const ctx = document.getElementById('chart3').getContext('2d');
            
            const ages = trainData.filter(d => d.Age).map(d => d.Age);
            const bins = [0, 10, 20, 30, 40, 50, 60, 70, 80];
            const counts = new Array(bins.length - 1).fill(0);
            
            ages.forEach(age => {
                for (let i = 0; i < bins.length - 1; i++) {
                    if (age >= bins[i] && age < bins[i+1]) {
                        counts[i]++;
                        break;
                    }
                }
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: bins.slice(0, -1).map((b, i) => `${b}-${bins[i+1]}`),
                    datasets: [{
                        label: 'Number of Passengers',
                        data: counts,
                        backgroundColor: 'rgba(54, 162, 235, 0.5)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: { display: true, text: 'Age Distribution' }
                    }
                }
            });
        }
        
        // –ì—Ä–∞—Ñ–∏–∫ —Ç–∞—Ä–∏—Ñ–æ–≤
        function createFareChart() {
            const ctx = document.getElementById('chart4').getContext('2d');
            
            const fares = trainData.filter(d => d.Fare).map(d => d.Fare);
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Fare',
                        data: fares.map((fare, i) => ({x: i, y: fare})),
                        backgroundColor: 'rgba(255, 99, 132, 0.5)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: { display: true, text: 'Fare Distribution' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞
        function createChart(type) {
            if (!trainData.length) {
                showStatus('‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ', 'error');
                return;
            }
            
            const ctx = document.getElementById('mainChart').getContext('2d');
            if (currentChart) currentChart.destroy();
            
            if (type === 'gender') {
                const male = trainData.filter(d => d.Sex === 'male');
                const female = trainData.filter(d => d.Sex === 'female');
                
                currentChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Male Survived', 'Male Died', 'Female Survived', 'Female Died'],
                        datasets: [{
                            data: [
                                male.filter(d => d.Survived === 1).length,
                                male.filter(d => d.Survived === 0).length,
                                female.filter(d => d.Survived === 1).length,
                                female.filter(d => d.Survived === 0).length
                            ],
                            backgroundColor: ['#4CAF50', '#F44336', '#2196F3', '#FF9800']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: { display: true, text: 'Survival by Gender (Detailed)' }
                        }
                    }
                });
                
                document.getElementById('insightText').innerHTML = `
                    <strong>Key Insights:</strong><br>
                    ‚Ä¢ Women had <strong>74.2%</strong> survival rate<br>
                    ‚Ä¢ Men had only <strong>18.9%</strong> survival rate<br>
                    ‚Ä¢ Gender was the strongest predictor of survival<br>
                    ‚Ä¢ "Women and children first" policy was strictly followed
                `;
            }
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç CSV
        function exportCSV() {
            if (mergedData.length === 0) {
                showStatus('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error', 'exportStatus');
                return;
            }
            
            const csv = Papa.unparse(mergedData);
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'titanic_merged_data.csv';
            a.click();
            
            showStatus('‚úÖ CSV —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω', 'success', 'exportStatus');
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç JSON
        function exportJSON() {
            if (mergedData.length === 0) {
                showStatus('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error', 'exportStatus');
                return;
            }
            
            const summary = {
                totalPassengers: mergedData.length,
                trainCount: trainData.length,
                testCount: testData.length,
                survivalRate: trainData.length ? 
                    ((trainData.filter(r => r.Survived === 1).length / trainData.length * 100).toFixed(1) + '%') : 'N/A'
            };
            
            const json = JSON.stringify(summary, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'titanic_summary.json';
            a.click();
            
            showStatus('‚úÖ JSON —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω', 'success', 'exportStatus');
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
        function exportReport() {
            showStatus('üìã –û—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)', 'success', 'exportStatus');
            console.log('=== TITANIC EDA REPORT ===');
            console.log('Total passengers:', mergedData.length);
            console.log('Training set:', trainData.length);
            console.log('Test set:', testData.length);
            console.log('Survival rate:', trainData.length ? 
                ((trainData.filter(r => r.Survived === 1).length / trainData.length * 100).toFixed(1) + '%') : 'N/A');
        }
        
        // –°–±—Ä–æ—Å
        function resetAll() {
            mergedData = [];
            trainData = [];
            testData = [];
            
            document.getElementById('trainFile').value = '';
            document.getElementById('testFile').value = '';
            
            document.getElementById('totalPassengers').textContent = '0';
            document.getElementById('trainCount').textContent = '0';
            document.getElementById('testCount').textContent = '0';
            
            document.getElementById('previewBody').innerHTML = 
                '<tr><td colspan="6" style="text-align: center; padding: 20px;">No data loaded</td></tr>';
            
            document.getElementById('missingValues').innerHTML = '<p>Load data to see missing values</p>';
            document.getElementById('statistics').innerHTML = '<p>Run analysis to see statistics</p>';
            
            showStatus('üîÑ –î–∞—à–±–æ—Ä–¥ —Å–±—Ä–æ—à–µ–Ω', 'success');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            console.log('Titanic EDA Dashboard loaded');
            showStatus('‚úÖ –î–∞—à–±–æ—Ä–¥ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ó–∞–≥—Ä—É–∑–∏—Ç–µ train.csv –∏ test.csv', 'success');
        };
    </script>
</body>
</html>